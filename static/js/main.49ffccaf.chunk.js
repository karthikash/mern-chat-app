(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{228:function(e,t,a){},232:function(e,t){},234:function(e,t){},248:function(e,t){},250:function(e,t){},278:function(e,t){},280:function(e,t){},281:function(e,t){},286:function(e,t){},288:function(e,t){},307:function(e,t){},319:function(e,t){},322:function(e,t){},465:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(2),r=a.n(n),c=a(77),o=a.n(c),i=a(19),l=a(20),d=a(22),j=a(21),h=(a(228),a(466)),b=a(467),u=a(468),m=a(491),O=a(492),f=a(493),p=a(469),x=a(470),g=a(471),v=a(79),P={REACT_APP_API_BASE_URL:"https://mern-chat-backend.herokuapp.com/v1",REACT_APP_JWT_SECRET_KEY:"keepitsecret",REACT_APP_SOCKET:"https://kpenhanced.github.io"},C=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).isAuth=function(){var e=localStorage.getItem("_id"),t=localStorage.getItem("token");return!(!e||!t)&&Object(v.verify)(t,P.REACT_APP_JWT_SECRET_KEY)._id===e},e.logout=function(){var e=localStorage.getItem("_id"),t=localStorage.getItem("token"),a={Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(t)},s={method:"POST",headers:new Headers(a)};fetch("".concat(P.REACT_APP_API_BASE_URL,"/auth/logout/").concat(e),s).then((function(){localStorage.removeItem("_id"),localStorage.removeItem("token"),localStorage.removeItem("dp"),window.location.reload()})).catch((function(e){console.log("error: ",e)}))},e.deactivateAccount=function(){var e=localStorage.getItem("_id"),t=localStorage.getItem("token"),a={Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(t)},s={method:"DELETE",headers:new Headers(a)};fetch("".concat(P.REACT_APP_API_BASE_URL,"/user/delete/").concat(e),s).then((function(){localStorage.removeItem("_id"),localStorage.removeItem("token"),window.location.reload()})).catch((function(e){console.log("error: ",e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){if(this.isAuth()){var e=localStorage.getItem("dp");return Object(s.jsx)("div",{children:Object(s.jsxs)(h.a,{color:"faded",light:!0,expand:"md",children:[Object(s.jsx)(b.a,{href:"/chat",children:"Mern Chat App"}),Object(s.jsxs)(u.a,{className:"ml-auto",navbar:!0,children:[Object(s.jsxs)(m.a,{nav:!0,inNavbar:!0,children:[Object(s.jsx)(O.a,{nav:!0,caret:!0,children:"Account"}),Object(s.jsxs)(f.a,{right:!0,children:[Object(s.jsx)(p.a,{href:"/profile",children:"  Profile "}),Object(s.jsx)(p.a,{onClick:this.logout,children:" Logout "}),Object(s.jsx)(p.a,{href:"/reset",children:"Reset Password "}),Object(s.jsx)(p.a,{divider:!0}),Object(s.jsx)(p.a,{onClick:this.deactivateAccount,children:"  Deactivate Account   "})]})]}),Object(s.jsx)(x.a,{children:Object(s.jsx)(g.a,{className:"dp",src:e,alt:"Name"})})]})]})})}return Object(s.jsx)("div",{children:Object(s.jsx)(h.a,{color:"faded",light:!0,expand:"md",children:Object(s.jsx)(b.a,{href:"/chat",children:"Mern Chat App"})})})}}]),a}(n.Component),w=a(472),S=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{children:Object(s.jsxs)(h.a,{color:"faded",light:!0,expand:"md",children:[Object(s.jsx)(u.a,{navbar:!0,children:Object(s.jsx)(w.a,{children:"Chat App \xa9 2020. All Rights Reserved"})}),Object(s.jsx)(u.a,{className:"ml-auto",navbar:!0,children:Object(s.jsxs)(w.a,{children:["Created by ",Object(s.jsx)("a",{href:"https://github.com/kpenhanced",rel:"noreferrer",target:"_blank",children:"Karthik Ashokkumar"})," "]})})]})})}}]),a}(n.Component),A=a(18),_=a.n(A),y=a(26),T=a(23),N=a(12),k=a(473),I=a(474),U=a(475),E=a(476),L=a(477),R=a(217),F=a(51),B=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).getInitialState=function(){return{data:{sFirstName:"",sLastName:"",sUsername:"",sPassword:"",sConfirmPassword:""},errors:{},response:{status:"",message:"",error:""}}},s.handleChange=function(e){s.setState({data:Object(N.a)(Object(N.a)({},s.state.data),{},Object(T.a)({},e.target.name,e.target.value)),errors:Object(N.a)(Object(N.a)({},s.state.errors),{},Object(T.a)({},e.target.name,""))})},s.validate=function(){var e=s.state.data,t={};return Object(F.isAlpha)(e.sFirstName)||(t.sFirstName="First name must only contain alphabets."),""===e.sFirstName&&(t.sFirstName="First name cannot be empty."),Object(F.isAlpha)(e.sLastName)||(t.sLastName="Last name must only contain alphabets."),""===e.sLastName&&(t.sLastName="Last name cannot be empty."),""===e.sUsername&&(t.sUsername="Username cannot be empty."),e.sPassword.length<8&&(t.sPassword="Password must be atleast 8 characters."),""===e.sPassword&&(t.sPassword="Password cannot be empty."),e.sPassword!==e.sConfirmPassword&&(t.sConfirmPassword="Passwords doesn't match."),e.sConfirmPassword.length<8&&(t.sConfirmPassword="Password must be atleast 8 characters."),""===e.sConfirmPassword&&(t.sConfirmPassword="Password cannot be empty."),t},s.handleSubmit=function(e){e.preventDefault();var t=s.state.data,a=s.validate();if(0===Object.keys(a).length){delete t.sConfirmPassword;var n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(t)};fetch("".concat(P.REACT_APP_API_BASE_URL,"/auth/signup"),n).then(function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,s.setState({response:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error: ",e)})),s.setState(s.getInitialState())}else s.setState({errors:a})},s.state=s.getInitialState(),s}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,n=e.response;return Object(s.jsxs)(k.a,{onSubmit:this.handleSubmit,children:[Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sFirstName",children:"First Name"}),Object(s.jsx)(E.a,{id:"sFirstName",name:"sFirstName",invalid:!!a.sFirstName,onChange:this.handleChange,value:t.sFirstName,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sFirstName})]}),Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sLastName",children:"Last Name"}),Object(s.jsx)(E.a,{id:"sLastName",name:"sLastName",invalid:!!a.sLastName,onChange:this.handleChange,value:t.sLastName,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sLastName})]}),Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sUsername",children:"Username"}),Object(s.jsx)(E.a,{id:"sUsername",name:"sUsername",invalid:!!a.sUsername,onChange:this.handleChange,value:t.sUsername,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sUsername})]}),Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sPassword",children:"Password"}),Object(s.jsx)(E.a,{id:"sPassword",name:"sPassword",type:"password",invalid:!!a.sPassword,onChange:this.handleChange,value:t.sPassword,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sPassword})]}),Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sConfirmPassword",children:"Confirm Password"}),Object(s.jsx)(E.a,{id:"sConfirmPassword",name:"sConfirmPassword",type:"password",invalid:!!a.sConfirmPassword,onChange:this.handleChange,value:t.sConfirmPassword,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sConfirmPassword})]}),Object(s.jsx)(I.a,{children:n.message?n.status>400?Object(s.jsx)("div",{className:"alert alert-danger",children:n.message}):Object(s.jsx)("div",{className:"alert alert-success",children:n.message}):null}),Object(s.jsx)(I.a,{children:Object(s.jsx)(R.a,{color:"primary",block:!0,children:"Register"})})]})}}]),a}(n.Component),J=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).getInitialState=function(){return{data:{sUsername:"",sPassword:""},errors:{},response:{status:"",message:"",error:""}}},s.handleChange=function(e){s.setState({data:Object(N.a)(Object(N.a)({},s.state.data),{},Object(T.a)({},e.target.name,e.target.value)),errors:Object(N.a)(Object(N.a)({},s.state.errors),{},Object(T.a)({},e.target.name,""))})},s.validate=function(){var e=s.state.data,t={};return""===e.sUsername&&(t.sUsername="Username cannot be empty."),e.sPassword.length<8&&(t.sPassword="Password must be atleast 8 characters."),""===e.sPassword&&(t.sPassword="Password cannot be empty."),t},s.handleSubmit=function(e){e.preventDefault();var t=s.state.data,a=s.validate();if(0===Object.keys(a).length){var n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},credentials:"include",body:JSON.stringify(t)};fetch("".concat(P.REACT_APP_API_BASE_URL,"/auth/signin"),n).then(function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,s.setState({response:a}),200!==a.status){e.next=9;break}return localStorage.setItem("_id",a._id),localStorage.setItem("token",a.token),localStorage.setItem("dp",a.sImage),e.abrupt("return",window.location.assign("/chat"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error: ",e)})),s.setState(s.getInitialState())}else s.setState({errors:a})},s.state=s.getInitialState(),s}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,n=e.response;return Object(s.jsxs)(k.a,{onSubmit:this.handleSubmit,children:[Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sUsername",children:"Username"}),Object(s.jsx)(E.a,{id:"sUsername",name:"sUsername",invalid:!!a.sUsername,onChange:this.handleChange,value:t.sUsername,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sUsername})]}),Object(s.jsxs)(I.a,{children:[Object(s.jsx)(U.a,{for:"sPassword",children:"Password"}),Object(s.jsx)(E.a,{id:"sPassword",name:"sPassword",type:"password",invalid:!!a.sPassword,onChange:this.handleChange,value:t.sPassword,autoComplete:"off"}),Object(s.jsx)(L.a,{children:a.sPassword})]}),Object(s.jsx)(I.a,{children:n.message?n.status>400?Object(s.jsx)("div",{className:"alert alert-danger",children:n.message}):Object(s.jsx)("div",{className:"alert alert-success",children:n.message}):null}),Object(s.jsx)(I.a,{children:Object(s.jsx)(R.a,{color:"primary",block:!0,children:"Login"})})]})}}]),a}(n.Component),K=a(478),D=a(479),M=a(480),W=a(481),Y=a(482),z=a(483),H=a(484),q=a(485),G=a(82),Q=a.n(G),V=a(83),X=a.n(V),Z=a(220),$=Object(Z.io)(P.REACT_APP_SOCKET,{path:"/mern-chat-app"}),ee=(n.Component,a(78)),te=a(486),ae=a(487),se=a(488),ne=a(7),re=a.n(ne),ce=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).toggle=function(e){s.state.activeTab!==e&&s.setState({activeTab:e})},s.toggle=s.toggle.bind(Object(ee.a)(s)),s.state={activeTab:"2"},s}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsx)(D.a,{className:"justify-content-md-center",children:Object(s.jsxs)("div",{children:[Object(s.jsxs)(u.a,{tabs:!0,children:[Object(s.jsx)(x.a,{children:Object(s.jsx)(te.a,{className:re()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle("1")},children:"Create your account"})}),Object(s.jsx)(x.a,{children:Object(s.jsx)(te.a,{className:re()({active:"2"===this.state.activeTab}),onClick:function(){e.toggle("2")},children:"Log in to Chat"})})]}),Object(s.jsxs)(ae.a,{activeTab:this.state.activeTab,children:[Object(s.jsxs)(se.a,{tabId:"1",children:[Object(s.jsx)("br",{}),Object(s.jsx)(D.a,{children:Object(s.jsx)(M.a,{md:12,children:Object(s.jsx)(W.a,{body:!0,children:"1"===this.state.activeTab?Object(s.jsx)(B,{}):null})})})]}),Object(s.jsxs)(se.a,{tabId:"2",children:[Object(s.jsx)("br",{}),Object(s.jsx)(D.a,{children:Object(s.jsx)(M.a,{md:12,children:Object(s.jsx)(W.a,{body:!0,children:"2"===this.state.activeTab?Object(s.jsx)(J,{}):null})})})]})]})]})})}}]),a}(n.Component),oe=a(489),ie=a(490),le=(n.Component,n.Component,a(221)),de=a(17),je=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).isAuth=function(){var e=localStorage.getItem("_id"),t=localStorage.getItem("token");return!(!e||!t)&&Object(v.verify)(t,P.REACT_APP_JWT_SECRET_KEY)._id===e},e}return Object(l.a)(a,[{key:"render",value:function(){return this.isAuth()?Object(s.jsxs)(q.a,{children:[Object(s.jsx)(D.a,{children:Object(s.jsx)(M.a,{children:Object(s.jsx)(C,{})})}),Object(s.jsx)(le.a,{basename:"https://kpenhanced.github.io/mern-chat-app",children:Object(s.jsx)(de.a,{render:function(e){var t=e.location;console.log(t),de.c,de.a,de.a,de.a}})}),Object(s.jsx)(D.a,{children:Object(s.jsx)(M.a,{children:Object(s.jsx)(S,{})})})]}):Object(s.jsxs)(q.a,{children:[Object(s.jsx)(D.a,{children:Object(s.jsx)(M.a,{children:Object(s.jsx)(C,{})})}),Object(s.jsx)(ce,{}),Object(s.jsx)(D.a,{children:Object(s.jsx)(M.a,{children:Object(s.jsx)(S,{})})})]})}}]),a}(n.Component);a(463),a(464);o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(je,{})}),document.getElementById("root"))}},[[465,1,2]]]);
//# sourceMappingURL=main.49ffccaf.chunk.js.map